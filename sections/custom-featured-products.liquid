{% comment %}
  Custom featured products section
  - Displays selected products in a responsive grid
  - Simple example for theme customization practice
{% endcomment %}

<section class="custom-featured-products">
  <div class="custom-featured-products__inner">
    {% if section.settings.heading != '' %}
      <h2 class="custom-featured-products__heading">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    {% if section.settings.subheading != '' %}
      <p class="custom-featured-products__subheading">
        {{ section.settings.subheading }}
      </p>
    {% endif %}

    {% if section.settings.collection != blank %}
      {% assign collection = collections[section.settings.collection] %}
      {% if collection.products_count > 0 %}
        <div class="custom-featured-products__grid">
          {% for product in collection.products limit: section.settings.products_limit %}
            <article class="custom-featured-products__item">
              <a href="{{ product.url }}" class="custom-featured-products__link">
                {% if product.featured_image %}
                  <div class="custom-featured-products__image-wrapper">
                    <img 
                      src="{{ product.featured_image | img_url: '400x' }}" 
                      alt="{{ product.featured_image.alt | escape }}"
                      loading="lazy"
                    >
                  </div>
                {% endif %}
                <h3 class="custom-featured-products__title">
                  {{ product.title }}
                </h3>
                <span class="custom-featured-products__price">
                  {{ product.price | money }}
                </span>
              </a>
            </article>
          {% endfor %}
        </div>
      {% else %}
        <p>No products found in this collection.</p>
      {% endif %}
    {% else %}
      <p>No collection selected.</p>
    {% endif %}
  </div>
</section>

{% schema %}
{
  "name": "Custom featured products",
  "tag": "section",
  "class": "section custom-featured-products-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured products"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Carefully selected items from this collection."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_limit",
      "label": "Number of products to show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 4
    }
  ],
  "presets": [
    {
      "name": "Custom featured products"
    }
  ]
}
{% endschema %}
